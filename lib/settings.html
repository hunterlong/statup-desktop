<!DOCTYPE html>
<html>
<head>
    <title>Statup Settings</title>
    <!-- Stylesheets -->
    <link rel="stylesheet" href="photon.min.css">
    <script>
        var path = require('path')
        var statup = require(path.join(__dirname, '/statup'))
    </script>
</head>

<body>
<!-- Wrap your entire app inside .window -->
<div class="window">
    <header class="toolbar toolbar-header">

    </header>
    <div class="window-content">
        <div class="pane-group">
            <div class="pane">
                <div class="padded-more">
                <form id="settings">
                    <div class="radio">
                        <label>
                            <input type="radio" name="radios" checked>
                            Local Connection
                        </label>
                    </div>
                    <div class="radio">
                        <label>
                            <input type="radio" name="radios">
                            Remote Statup Server
                        </label>
                    </div>
                    <div class="form-group">
                        <label>Server Host</label>
                        <input type="text" name="server" class="form-control" placeholder="Hostname or IP of Statup">
                    </div>
                    <div class="form-group">
                        <label>Server Port</label>
                        <input type="number" name="port" class="form-control" value="8080">
                    </div>
                    <div class="form-group">
                        <label>API Key</label>
                        <input type="text" name="key" class="form-control" placeholder="API Key">
                    </div>
                    <div class="form-group">
                        <label>API Secret</label>
                        <input type="text" name="secret" class="form-control" placeholder="API Secret">
                    </div>
                </div>
            </div>
            <div class="pane">
                <div class="padded-more">
                <div class="checkbox">
                    <label>
                        <input type="checkbox"> Start Statup on Boot
                    </label>
                </div>
                </div>
            </div>
            <div class="pane">
                <div class="padded-more">
                    <button onclick="statup.OpenDataDirectory()" class="btn btn-large btn-default">Open Statup Directory</button>

                    <button onclick="statup.Kill()" class="btn btn-large btn-default">Stop Server</button>

                    <button onclick="statup.Start()" class="btn btn-large btn-default">Start Server</button>

                </div>
            </div>
        </div>
    </div>
    <footer class="toolbar toolbar-footer">
        <div class="toolbar-actions">
            <button onclick="statup.CloseSettings()" class="btn btn-default">
                Close
            </button>

            <button type="submit" class="btn btn-primary pull-right">
                Save Settings
            </button>
        </div>
    </footer>
    </form>
</div>
</div>
</body>

<script>

    document.getElementById("settings").addEventListener("submit", function(e, data) {
        console.log(e, data);

        var elements = document.getElementById("settings").elements;
        var obj ={};
        for(var i = 0 ; i < elements.length ; i++){
            var item = elements.item(i);
            obj[item.name] = item.value;
        }

        statup.Save(obj)

        e.preventDefault();
    });

</script>

<style>
    header {
        -webkit-app-region: drag;
    }
</style>
</html>
